<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –ë—Ä–∞—É–∑–µ—Ä</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
<div class="container">
    <h1>–ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ</h1>
    <form method="GET" action="/">
        <label for="public_key">–í–≤–µ–¥–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—É—é —Å—Å—ã–ª–∫—É:</label>
        <input type="text" id="public_key" name="public_key" value="{{ public_key }}" required>
        <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
    </form>

    {% if public_key %}
    <form method="GET" action="/">
        <input type="hidden" name="public_key" value="{{ public_key }}">
        <input type="hidden" name="path" value="{{ current_path }}">
        <label for="file_type">–§–∏–ª—å—Ç—Ä:</label>
        <select name="file_type" id="file_type" onchange="this.form.submit()">
            <option value="">–í—Å–µ —Ñ–∞–π–ª—ã</option>
            <option value="documents" {% if file_type == 'documents' %}selected{% endif %}>–î–æ–∫—É–º–µ–Ω—Ç—ã</option>
            <option value="images" {% if file_type == 'images' %}selected{% endif %}>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</option>
        </select>
    </form>

    <h2>–¢–µ–∫—É—â–∏–π –ø—É—Ç—å: {{ current_path or '/' }}</h2>
    <form method="POST" action="/download-multiple">
        <input type="hidden" name="public_key" value="{{ public_key }}">
        <ul>
            {% if current_path %}
            <li>
                <a href="/?public_key={{ public_key }}&path={{ current_path.rsplit('/', 1)[0] }}">‚¨ÜÔ∏è –í–≤–µ—Ä—Ö</a>
            </li>
            {% endif %}
            {% for file in files %}
            <li>
                {% if file['type'] == 'dir' %}
                üìÅ <a href="/?public_key={{ public_key }}&path={{ file['path'] }}&file_type={{ file_type }}">{{ file['name'] }}</a>
                {% else %}
                üìÑ {{ file['name'] }}
                <input type="checkbox" name="file_paths" value="{{ file['path'] }}">
                <a href="/download?public_key={{ public_key }}&file_path={{ file['path'] }}">–°–∫–∞—á–∞—Ç—å</a>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        <button type="submit">–°–∫–∞—á–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã</button>
    </form>
    {% endif %}
</div>
</body>
</html>
